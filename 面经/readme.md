## 这里记录了我的面试被问到的问题

### 网易C++开发工程师

#### 一面

- new和malloc的区别，malloc的内存分配方式
- 智能指针（给了一段代码，看这段代码有什么问题，然后解释每句话的计数值是多少）
- STL中比如vector和map的数据结构和内存申请方式，红黑树为什么快
- 内联函数的优缺点
- 单例是如何实现的
- 解释一下多态，举一下实例
- 线程同步的几种方式
- 选一个项目进行介绍，并讲讲遇到了什么问题，是怎么解决的
- 有没有记录的习惯，比如CSDN、博客，这个习惯带来了怎样的影响

#### 二面

- 自我介绍
- 手撕两道代码：反转链表、数组中和最大的连续子串
- 给了三行代码，问两个变量的结果，考察连续赋值、前缀加、后缀加、或（“||”）


### 字节视频架构实习生一面

#### 一面

- 自我介绍
- 用户态和内核态分别是什么，怎么互相转换，有什么指令或操作引起转换
    - 通过系统调用、中断、异常可以由用户态切换到内核态
    - 系统调用：进程控制、进程通信、文件操作、设备操作、信息维护、安全
- 进程的几种状态，如何切换
    - 就绪状态：通过调度算法获得CPU时间，转换为运行状态
    - 运行状态：在分配给进程的CPU时间片用完后会转为就绪状态
    - 阻塞状态：当运行状态时要进行I/O操作会进入阻塞状态
- 造成死锁的原因（必要条件）
    - 互斥、占有和等待、不可抢占、环路等待
- TCP如何实现安全传输，除了三次握手、四次挥手外，有什么机制保证了传输的安全
    - 超时重传、滑动窗口、流量控制、拥塞控制
    - 拥塞控制：慢开始、拥塞避免、快重传、快恢复
- Http报文的结构，状态响应码
    - 请求报文：第一行包含请求方法、URL、协议版本，接下来多行是请求首部Header，每个首部都有一个首部名称以及对应的值，一个空行用来分隔首部和内容主体Body，最后是请求的内容主体
    - 响应报文：第一行包含协议版本、状态码和描述，后面和请求报文一样
- Https的传输机制
    - 加密，认证，完整性保护
- 哈希表，以及如何解决冲突
- 排序中稳定是什么意思，有哪些排序算法是稳定的
- 数据库比如mysql，客户端发起一条指令之后服务器是怎么做的
- 分布式系统的CAP
    - 一致性、可用性、分区容忍性
- 虚函数、虚函数表、虚表指针
- 解释一下内联函数，它和宏定义有什么区别
- 内存分区顺序，各个分区的作用，堆和栈的区别
- 最后手撕一道代码：最长回文子串

#### 二面

- 自我介绍，问了项目
- 排序中什么是稳定，如果修改冒泡排序使它变成不稳定的
- TCP和UDP的区别
- TCP的三次握手
- TCP滑动窗口有什么作用
- 如果服务器和带宽的资源无限，TCP的连接数的上限是多少
- 链路层如何根据目标IP地址找到目标的MAC地址
- 给定一个数据库表，根据要求写sql语句，以及看这个表是否符合第三范式，为什么不符合，要如何修改
- 任务的先后顺序用有向图表示，有向图用什么数据结构实现？拓扑排序
- 接收海量数据时如何记录的第k小的数
- 手撕代码：实现sqrt函数，给定target和r，求x使得|x－sqrt(target)|<r


### 字节AML系统实习生一面

#### 一面

- 自我介绍，问了一下项目
- TCP相关：实现了什么，有什么特点，底层调用了什么
- 手撕代码：写一个LRUCache类，有int capacity表示容量，有int get(int key)，void put(int key, int value)两个函数
- new和malloc和区别
- move()函数的作用，右值的作用
- SIMT（**Single instruction, multiple threads**）有了解吗？不了解。。
- CPU在执行时是执行进程还是线程，如果CPU有两个内核可以同时执行两个线程吗？
- GPU有了解吗？不了解。

#### 二面
- 讲一下项目
- 手撕代码：写一个优先队列（这个写了好久。。）
- unique_ptr和shared_ptr有什么区别
- 我想了解一些什么？我问了部门是干什么的，面试官就回答了一两句话，感觉凉了呀。。


### 字节抖音直播-支付业务实习生

#### 一面

- 自我介绍，问了项目
- TCP的四次挥手的过程
- TCP如何检测拥塞，如何进行处理
- 手撕代码：给定n个数，求最小的k个数，要求时间复杂度：O(n)，空间复杂度：常数
- 手撕代码：最长公共子序列，输出该最长公共子序列
- 有什么问题要问？


### 腾讯游戏引擎

#### 一面

- 个人主要有哪些技术
- 做的项目用的是哪个版本的C++
- 解释一下多态
    - 多态分为编译期多态和运行期多态
    - 编译期多态：通过模板具现化和函数重载解析实现，以不同的模板参数具现化导致调用不同的函数，就是编译期多态
    - 运行期多态：不同继承类的对象，对同一消息作出不同响应，基类的指针指向或绑定到派生类的对象，使得基类指针呈现不同的表现方式。将基类的函数定义为虚函数，在派生类中重写该函数，运行时会根据对象的实际类型来调用相应的函数
- 模板的实例化发生在什么时候？
    - 当首次为每个类型调用函数模板时，编译器会创建创建一个实例化，每个实例化是专用于该类型的模板化函数版本
    - 在使用类模板时，只有当代码中使用了类模板的一个实例的名字，而去上下文环境要求必须存在类的定义时，这个类模板才被实例化
        - 声明一个类模板的指针和引用，不会引起类模板的实例化，因为没有必要知道该类的定义，当检查这个指针或引用所指的对象时，会引起类模板的实例化
        - 定义类的对象时需要该类的定义，因此类模板会被实例化
        - 在使用sizeof()时，它是计算对象的大小，编译器必须根据类型将其实例化出来
        - new表达式要求类模板被实例化
        - 引用类模板的成员会导致类模板被实例化
- 函数的重载和返回值有关系吗？
    - 没有关系。函数的重载是指同一个可访问区内被声明几个具有不同参数列（参数的类型、个数、顺序）的同名函数，根据参数列表确定调用哪个函数，重载不关心函数返回类型
- 解释一下虚函数、纯虚函数、虚函数表、虚表指针这四个概念
    - 虚函数：
        - 被virtual关键字修饰的成员函数就是虚函数
    - 纯虚函数：
        - 在类中声明虚函数时加上"=0"
        - 含有纯虚函数的类称为抽象类，不能实例化对象，类中只有接口，没有具体的实现方法
        - 继承纯虚函数的派生类，如果没有完全实现基类函数，依然是抽象类
    - 虚函数表和虚表指针：
        - 虚函数通过虚函数表来实现
        - 虚函数的地址保存在虚函数表中，在类的对象所在的内存空间中，保存了指向虚函数表的指针（称为虚表指针），虚表指针指向虚函数表
        - 虚函数表解决了基类和派生类的继承问题和类中成员函数的覆盖问题，当用基类的指针来操作一个派生类的时候，这张虚函数表就指明了实际应该调用的函数
        - 虚函数表在编译阶段建立，程序的编译过程会将虚函数的地址放在虚函数表中
        - 虚函数表和类绑定，虚表指针和对象绑定
- 虚函数表的位置？
    - 虚函数表是全局共享的元素，即全局仅有一个
    - 虚函数表类似一个数组，类对象中存储vptr指针，指向虚函数表，即虚函数表不是函数，不是程序代码，不可能存储在代码段
    - 虚函数表存储虚函数的地址，即虚函数表的元素是指向类成员函数的指针，而类中虚函数的个数在编译期可以确定，即虚函数表的大小可以确定，即大小是在编译时期确定的，不必动态分配内存空间存储虚函数表，所以不在堆中
    - 根据以上特征，虚函数表类似于类中静态成员变量，静态成员变量也是全局共享、大小确定
    - 所以我推测虚函数表和静态成员变量一样存放在全局数据区
- 函数参数存在栈上还是堆上？入栈顺序是从左往右还是从右往左？
    - 栈上，从右往左
    - 每个参数都有自己的地址，但可变长参数无法确认地址，并且函数参数的个数也不确定
    - 如果从左往右传参，栈顶看到的是最后一个参数，由于不知道参数的数量，所以无法确定首参数的地址
- 快速排序是稳定的吗？什么情况下它的复杂度会达到O(n^2)？
    - 不稳定
    - 当数组原来就是有序的时候，复杂度会达到O(n^2)
- 快速排序有什么优化方法？（我只回答了锚点的随机选取）
    - 锚点：随机选取、三数取中
    - 当待排序序列的长度分割到一定大小后，使用插入排序
    - 在一次分割结束后，把与锚点值相等的元素聚在锚点周围，减少递归时数组的长度，从而减少迭代次数
    - 通过尾递归优化来减少堆栈深度
- 当定义了map[0] = “a”，map[1] = ”b”，如果程序直接调用map[2]，会发生什么？程序会直接结束还是警告？
    - value为int类型会返回默认值0，并将 **map[2]=0** 插入
    - value为string类型会返回默认值""，并将 **map[2]=""** 插入
    - value为char类型程序会直接结束，捕获不到异常
- map底层实现？红黑树和平衡搜索树、搜索树的区别？
- 堆和栈的区别？
- 解释一下内存泄漏和野指针？如何避免？如何定义野指针的“指向不确定的地址”？
    - 内存泄漏：动态申请的内存空间没有正常释放，但是也不能继续使用，比如指向这块空间的指针指向了其它地方，导致没有指针指向这块空间，无法访问也无法释放
    - 悬空指针：若指针指向一块内存空间，当这块内存空间被释放后，该指针仍然指向这块内存空间，则称它为悬空指针
    - 野指针：不确定其指向的指针，未初始化的指针，任何指针刚被创建时不会自动成为NULL指针，它的默认值是随机的
    - *无论是野指针还是悬空指针，都是指向无效内存区域的指针（这里的无效指的是不安全不可控）* 见[野(wild)指针和悬空(dangling)指针](https://www.cnblogs.com/idorax/p/6475941.html)
- 程序不断造成内存泄漏，系统最终会报异常吗？
    
- shared_ptr中引用计数在什么时候修改？
- 为什么需要有weak_ptr？
- 解释一下虚拟内存和物理内存？
- 在windous上运行一个32位程序，系统会给它分配多少内存？其中有多少给用户，多少给系统？
- 学过线性代数吗？如何判断一个点在三角形里？
- 有玩什么网游吗？Dota2中你释放了技能，其它玩家是如何感受到的？服务器和玩家的连接是TCP还是UDP？
- TCP的缺点，相比UDP有什么缺点？